<dataConfig>
	<dataSource driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/recipe"
		user="recipe" password="recipe" />
	<document>
		<entity name="recipe" query="select id, user_id as userid, name, servings, photo, allow_share as allowshare, status, category_id, description, notes, background from recipe">
			<entity name="category" query="select name as catname from category where id=${recipe.category_id}"></entity>
			<entity name="source" query="select type as sourcetype, cookbook, magazine, newspaper, person, website_url as website, other from source where recipe_id='${recipe.id}'"></entity>
			<entity name="instruction_section" query="select id from instruction_section where recipe_id='${recipe.id}'">			
				<entity name="instructions" query="select description as instructdesc from instructions where section_id='${instruction_section.id}'"></entity>
			</entity>
			<entity name="ingredient_section" query="select id from ingredient_section where recipe_id='${recipe.id}'">			
				<entity name="recipe_ingredients" query="select ingredient_id from recipe_ingredients where section_id='${ingredient_section.id}'">			
					<entity name="ingredient" query="select id as ingredid, name as ingredname from ingredient where id='${recipe_ingredients.ingredient_id}'"></entity>
				</entity>
			</entity>
			<entity name="recipe" query="select unnest(tags) as tags from recipe where id='${recipe.id}'"></entity>
		</entity>
	</document>
</dataConfig>
